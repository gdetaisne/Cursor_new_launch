# Commits pour P0-t005

## [423873d] P0-t005: Complete Prisma schema specification
**Date** : 2025-11-10

**Fichiers** :
- .cursor/tasks/P0-t005-schema-core-back-office.md

**Changements** :
Création complète du schéma Prisma avec 11 tables et 8 enums :

**Tables** :
- Lead : prospects des 11 sites locaux
- Client : données clients
- Folder : dossiers déménagement complets (adresses, volume, options)
- Mover : déménageurs (Google Places, scoring financier manuel)
- PricingGrid : grilles tarifaires (m³ × km, paliers)
- Quote : devis (AUTO_GENERATED/EMAIL_PARSED/MANUAL)
- Booking : réservations confirmées
- Payment : paiements + reversements (commission 5-15%)
- User : comptes admin/operator/partner
- EmailLog : tracking emails (statuts, tracking ouvertures)
- EmailTemplate : templates emails (optionnel)

**Relations clés** :
- Lead 1:1 Folder
- Folder 1:n Quote (10 devis)
- Folder 1:1 Booking
- Quote 1:1 Booking
- Mover 1:n PricingGrid, Quote, Booking, User

**Features** :
- Flux complet : Lead → Folder → Quote → Booking → Payment
- Validation admin obligatoire pour quotes parsed
- Scoring financier manuel (CreditSafe web, pas API)
- Champs Google Places integration
- Stripe tracking (payment intent, transfer)
- Index performance (status, foreign keys, composite)
- Contraintes CASCADE et UNIQUE
- Timestamps automatiques (createdAt, updatedAt)

Total : 626 lignes ajoutées

